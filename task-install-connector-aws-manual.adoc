---
sidebar: sidebar 
permalink: task-install-connector-aws-manual.html 
keywords: install connector, aws connector installation, aws connector, install connector in aws, bluexp, aws marketplace, manual install, create connector 
summary: 'Per installare manualmente il connettore sul proprio host Linux, è necessario rivedere i requisiti dell"host, configurare la rete, preparare le autorizzazioni AWS, installare il connettore e quindi fornire le autorizzazioni preparate.' 
---
= Installare manualmente il connettore in AWS
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Per installare manualmente il connettore sul proprio host Linux, è necessario rivedere i requisiti dell'host, configurare la rete, preparare le autorizzazioni AWS, installare il connettore e quindi fornire le autorizzazioni preparate.

.Prima di iniziare
Dovresti rivedere link:reference-limitations.html["Limitazioni del connettore"].



== Fase 1: Esaminare i requisiti dell'host

Il software del connettore deve essere eseguito su un host che soddisfi i requisiti specifici del sistema operativo, della RAM, dei requisiti delle porte e così via.

Host dedicato:: Il connettore non è supportato su un host condiviso con altre applicazioni. L'host deve essere un host dedicato.
Sistemi operativi supportati::
+
--
* Ubuntu 22,04 LTS
* Red Hat Enterprise Linux
+
** da 8,6 a 8,10
** da 9,1 a 9,3
+
L'host deve essere registrato con Red Hat Subscription Management. Se non è registrato, l'host non può accedere ai repository per aggiornare il software di terze parti richiesto durante l'installazione del connettore.

+
Il connettore è supportato dalle versioni in lingua inglese di questi sistemi operativi.





--
Hypervisor:: È necessario un hypervisor bare metal o in hosting certificato per l'esecuzione di un sistema operativo supportato.
CPU:: 4 core o 4 vCPU
RAM:: 14 GB
Tipo di istanza AWS EC2:: Un tipo di istanza che soddisfa i requisiti di CPU e RAM indicati in precedenza. Si consiglia di utilizzare t3.xlarge.
Coppia di chiavi:: Quando si crea il connettore, è necessario selezionare una coppia di chiavi EC2 da utilizzare con l'istanza.
Spazio su disco in /opz:: 100 GiB di spazio deve essere disponibile
+
--
BlueXP utilizza `/opt` per installare `/opt/application/netapp` directory e il suo contenuto.

--
Spazio su disco in /var:: 20 GiB di spazio deve essere disponibile
+
--
BlueXP richiede questo spazio in `/var` Perché Docker o Podman sono progettati per creare i container all'interno di questa directory. In particolare, creeranno contenitori in `/var/lib/containers/storage` directory. Montaggi esterni o collegamenti simbolici non funzionano per questo spazio.

--
Tool di orchestrazione del container:: A seconda del sistema operativo in uso, prima di installare il connettore è necessario utilizzare Podman o Docker Engine.
+
--
* Podman versione 4.6.1 è richiesto per Red Hat Enterprise Linux 8 e 9.
+
Per Podman devono essere soddisfatti i seguenti prerequisiti:

+
** Il servizio podman.socket deve essere attivato e avviato
** python3 deve essere installato
** Il pacchetto podman-Compose versione 1.0.6 deve essere installato
** Podman-compose deve essere aggiunto alla variabile di ambiente PATH


* Docker Engine è richiesto per Ubuntu.
+
** La versione minima supportata è 23,0.6.
** La versione massima supportata è 25,0.5.




--




== Passaggio 2: Installare Podman o Docker Engine

A seconda del sistema operativo in uso, prima di installare il connettore è necessario utilizzare Podman o Docker Engine.

* Podman è necessario per Red Hat Enterprise Linux 8 e 9.
* Docker Engine è richiesto per Ubuntu.


.Fasi
[role="tabbed-block"]
====
.Podman
--
Installare Podman 4,6.1.

.Fasi
. Rimuovere il pacchetto podman-docker se è installato sull'host.
+
[source, cli]
----
dnf remove podman-docker
rm /var/run/docker.sock
----
. Installa Podman.
+
Podman è disponibile presso i repository ufficiali di Red Hat Enterprise Linux.

+
Per Red Hat Enterprise Linux 9:

+
[source, cli]
----
sudo dnf install podman-2:4.6.1
----
+
Per Red Hat Enterprise Linux 8:

+
[source, cli]
----
sudo dnf install podman-3:4.6.1
----
. Abilitare e avviare il servizio podman.socket.
+
[source, cli]
----
sudo systemctl enable --now podman.socket
----
. Installare python3.
+
[source, cli]
----
sudo dnf install python3
----
. Installare il pacchetto repository EPEL se non è già disponibile sul sistema.
+
Questo passaggio è necessario perché podman-compose è disponibile nel repository Extra Packages for Enterprise Linux (EPEL).

+
Per Red Hat Enterprise Linux 9:

+
[source, cli]
----
sudo dnf install https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm
----
+
Per Red Hat Enterprise Linux 8:

+
[source, cli]
----
sudo dnf install https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm
----
. Installare il pacchetto podman-Compose 1,0.6.
+
[source, cli]
----
sudo dnf install podman-compose-1.0.6
----
+

NOTE: Utilizzando il `dnf install` Il comando soddisfa il requisito per aggiungere podman-compose alla variabile di ambiente PATH. Il comando di installazione aggiunge podman-componete a /usr/bin, che è già incluso in `secure_path` sull'host.



--
.Motore Docker
--
Installare una versione di Docker Engine tra la versione 23.0.6 e la 25,0.5.

.Fasi
. Installazione di Docker Engine.
+
https://docs.docker.com/engine/install/["Consulta le istruzioni di installazione di Docker"^]

+
Assicurati di seguire la procedura per installare una versione specifica di Docker Engine. L'installazione della versione più recente installerà una versione di Docker che BlueXP non supporta.

. Verifica che Docker sia abilitato e in esecuzione.
+
[source, cli]
----
sudo systemctl enable docker && sudo systemctl start docker
----


--
====


== Fase 3: Configurare la rete

Assicurarsi che la posizione di rete in cui si intende installare il connettore supporti i seguenti requisiti. Il connettore, che soddisfa questi requisiti, consente di gestire le risorse e i processi all'interno del tuo ambiente di cloud ibrido.

Connessioni alle reti di destinazione:: Un connettore richiede una connessione di rete alla posizione in cui si intende creare e gestire gli ambienti di lavoro. Ad esempio, la rete in cui intendi creare sistemi Cloud Volumes ONTAP o un sistema storage nel tuo ambiente on-premise.


Accesso a Internet in uscita:: La posizione di rete in cui si implementa il connettore deve disporre di una connessione Internet in uscita per contattare endpoint specifici.


Endpoint contattati durante l'installazione manuale:: Quando si installa manualmente il connettore sul proprio host Linux, il programma di installazione del connettore richiede l'accesso ai seguenti URL durante il processo di installazione:
+
--
* \https://support.netapp.com
* \https://mysupport.netapp.com
* \https://cloudmanager.cloud.netapp.com/tenancy
* \https://stream.cloudmanager.cloud.netapp.com
* \https://production-artifacts.cloudmanager.cloud.netapp.com
* \https://*.blob.core.windows.net
* \https://cloudmanagerinfraprod.azurecr.io
+
L'host potrebbe tentare di aggiornare i pacchetti del sistema operativo durante l'installazione. L'host può contattare diversi siti di mirroring per questi pacchetti di sistemi operativi.



--


Endpoint contattati dal connettore:: Il connettore richiede l'accesso a Internet in uscita per contattare i seguenti endpoint al fine di gestire risorse e processi all'interno dell'ambiente di cloud pubblico per le operazioni quotidiane.
+
--
Si noti che gli endpoint elencati di seguito sono tutte le voci CNAME.

[cols="2a,1a"]
|===
| Endpoint | Scopo 


 a| 
Servizi AWS (amazonaws.com):

* CloudFormation
* Elastic Compute Cloud (EC2)
* Gestione delle identità e degli accessi (IAM)
* Servizio di gestione delle chiavi (KMS)
* Servizio token di sicurezza (STS)
* S3 (Simple Storage Service)

 a| 
Per gestire le risorse in AWS. L'endpoint esatto dipende dall'area AWS che stai utilizzando. https://docs.aws.amazon.com/general/latest/gr/rande.html["Per ulteriori informazioni, fare riferimento alla documentazione AWS"^]



 a| 
\https://support.netapp.com
\https://mysupport.netapp.com
 a| 
Per ottenere informazioni sulle licenze e inviare messaggi AutoSupport al supporto NetApp.



 a| 
\https://*.api.bluexp.netapp.com

\https://api.bluexp.netapp.com

\https://*.cloudmanager.cloud.netapp.com

\https://cloudmanager.cloud.netapp.com

\https://netapp-cloud-account.auth0.com
 a| 
Fornire funzionalità e servizi SaaS all'interno di BlueXP.

Tenere presente che il connettore sta contattando "cloudmanager.cloud.netapp.com", ma inizierà a contattare "api.bluexp.netapp.com" in una versione successiva.



 a| 
\https://*.blob.core.windows.net

\https://cloudmanagerinfraprod.azurecr.io
 a| 
Per aggiornare il connettore e i relativi componenti Docker.

|===
--


Server proxy:: Se l'organizzazione richiede la distribuzione di un server proxy per tutto il traffico Internet in uscita, ottenere le seguenti informazioni sul proxy HTTP o HTTPS. Queste informazioni devono essere fornite durante l'installazione. BlueXP non supporta i server proxy trasparenti.
+
--
* Indirizzo IP
* Credenziali
* Certificato HTTPS


--


Porte:: Non c'è traffico in entrata verso il connettore, a meno che non venga avviato o se il connettore viene utilizzato come proxy per inviare messaggi AutoSupport da Cloud Volumes ONTAP al supporto NetApp.
+
--
* HTTP (80) e HTTPS (443) forniscono l'accesso all'interfaccia utente locale, che verrà utilizzata in rare circostanze.
* SSH (22) è necessario solo se è necessario connettersi all'host per la risoluzione dei problemi.
* Le connessioni in entrata sulla porta 3128 sono necessarie se si implementano sistemi Cloud Volumes ONTAP in una subnet in cui non è disponibile una connessione Internet in uscita.
+
Se i sistemi Cloud Volumes ONTAP non dispongono di una connessione a Internet in uscita per inviare messaggi AutoSupport, BlueXP configura automaticamente tali sistemi in modo che utilizzino un server proxy incluso nel connettore. L'unico requisito è garantire che il gruppo di sicurezza del connettore consenta le connessioni in entrata sulla porta 3128. Dopo aver implementato il connettore, aprire questa porta.



--


Enable NTP (attiva NTP):: Se stai pensando di utilizzare la classificazione BlueXP per analizzare le origini dati aziendali, dovresti attivare un servizio NTP (Network Time Protocol) sia sul sistema del connettore BlueXP che sul sistema di classificazione BlueXP in modo che l'ora venga sincronizzata tra i sistemi. https://docs.netapp.com/us-en/bluexp-classification/concept-cloud-compliance.html["Scopri di più sulla classificazione BlueXP"^]




== Passaggio 4: Impostare le autorizzazioni

Devi fornire autorizzazioni AWS ad BlueXP tramite una delle seguenti opzioni:

* Opzione 1: Creazione di criteri IAM e associazione dei criteri a un ruolo IAM che è possibile associare all'istanza EC2.
* Opzione 2: Fornisci a BlueXP la chiave di accesso AWS a un utente IAM che dispone delle autorizzazioni necessarie.


Segui i passaggi per preparare le autorizzazioni per BlueXP.

[role="tabbed-block"]
====
.Ruolo IAM
--
.Fasi
. Accedere alla console AWS e accedere al servizio IAM.
. Creare una policy:
+
.. Selezionare *Criteri > Crea policy*.
.. Selezionare *JSON* e copiare e incollare il contenuto di link:reference-permissions-aws.html["Policy IAM per il connettore"].
.. Completare i passaggi rimanenti per creare il criterio.
+
A seconda dei servizi BlueXP che si intende utilizzare, potrebbe essere necessario creare una seconda policy. Per le regioni standard, le autorizzazioni sono distribuite in due policy. Sono necessarie due policy a causa di un limite massimo di dimensioni dei caratteri per le policy gestite in AWS. link:reference-permissions-aws.html["Scopri di più sulle policy IAM per il connettore"].



. Creare un ruolo IAM:
+
.. Selezionare *ruoli > Crea ruolo*.
.. Selezionare *servizio AWS > EC2*.
.. Aggiungere le autorizzazioni allegando il criterio appena creato.
.. Completare i passaggi rimanenti per creare il ruolo.




.Risultato
Ora si dispone di un ruolo IAM che è possibile associare all'istanza EC2 dopo aver installato il connettore.

--
.Chiave di accesso AWS
--
.Fasi
. Accedere alla console AWS e accedere al servizio IAM.
. Creare una policy:
+
.. Selezionare *Criteri > Crea policy*.
.. Selezionare *JSON* e copiare e incollare il contenuto di link:reference-permissions-aws.html["Policy IAM per il connettore"].
.. Completare i passaggi rimanenti per creare il criterio.
+
A seconda dei servizi BlueXP che si intende utilizzare, potrebbe essere necessario creare una seconda policy.

+
Per le regioni standard, le autorizzazioni sono distribuite in due policy. Sono necessarie due policy a causa di un limite massimo di dimensioni dei caratteri per le policy gestite in AWS. link:reference-permissions-aws.html["Scopri di più sulle policy IAM per il connettore"].



. Allegare i criteri a un utente IAM.
+
** https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create.html["Documentazione AWS: Creazione dei ruoli IAM"^]
** https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_manage-attach-detach.html["Documentazione di AWS: Aggiunta e rimozione dei criteri IAM"^]


. Assicurarsi che l'utente disponga di una chiave di accesso che è possibile aggiungere a BlueXP dopo aver installato il connettore.


.Risultato
Ora si dispone di un utente IAM che dispone delle autorizzazioni necessarie e di una chiave di accesso che è possibile fornire a BlueXP.

--
====


== Fase 5: Installare il connettore

Una volta completati i prerequisiti, è possibile installare manualmente il software sul proprio host Linux.

.Prima di iniziare
Dovresti disporre di quanto segue:

* Privilegi root per installare il connettore.
* Dettagli su un server proxy, se è richiesto un proxy per l'accesso a Internet dal connettore.
+
È possibile configurare un server proxy dopo l'installazione, ma per farlo è necessario riavviare il connettore.

+
BlueXP non supporta i server proxy trasparenti.

* Un certificato firmato dalla CA, se il server proxy utilizza HTTPS o se il proxy è un proxy di intercettazione.


.A proposito di questa attività
Il programma di installazione disponibile sul NetApp Support Site potrebbe essere una versione precedente. Dopo l'installazione, il connettore si aggiorna automaticamente se è disponibile una nuova versione.

.Fasi
. Se le variabili di sistema _http_proxy_ o _https_proxy_ sono impostate sull'host, rimuoverle:
+
[source, cli]
----
unset http_proxy
unset https_proxy
----
+
Se non si rimuovono queste variabili di sistema, l'installazione avrà esito negativo.

. Scaricare il software del connettore da https://mysupport.netapp.com/site/products/all/details/cloud-manager/downloads-tab["Sito di supporto NetApp"^], Quindi copiarlo sull'host Linux.
+
È necessario scaricare il programma di installazione del connettore "online" da utilizzare nella rete o nel cloud. Un programma di installazione "offline" separato è disponibile per il connettore, ma è supportato solo con le implementazioni in modalità privata.

. Assegnare le autorizzazioni per eseguire lo script.
+
[source, cli]
----
chmod +x BlueXP-Connector-Cloud-<version>
----
+
Dove <version> è la versione del connettore scaricato.

. Eseguire lo script di installazione.
+
[source, cli]
----
 ./BlueXP-Connector-Cloud-<version> --proxy <HTTP or HTTPS proxy server> --cacert <path and file name of a CA-signed certificate>
----
+
I parametri --proxy e --cakert sono facoltativi. Se si dispone di un server proxy, è necessario immettere i parametri come mostrato. Il programma di installazione non richiede di fornire informazioni su un proxy.

+
Ecco un esempio del comando che utilizza entrambi i parametri facoltativi:

+
[source, cli]
----
 ./BlueXP-Connector-Cloud-v3.9.40--proxy https://user:password@10.0.0.30:8080/ --cacert /tmp/cacert/certificate.cer
----
+
--proxy configura il connettore per l'utilizzo di un server proxy HTTP o HTTPS utilizzando uno dei seguenti formati:

+
** \http://address:port
** \http://user-name:password@address:port
** \http://domain-name%92user-name:password@address:port
** \https://address:port
** \https://user-name:password@address:port
** \https://domain-name%92user-name:password@address:port
+
Tenere presente quanto segue:

+
*** L'utente può essere un utente locale o un utente di dominio.
*** Per un utente di dominio, è necessario utilizzare il codice ASCII per un \ come mostrato sopra.
*** BlueXP non supporta nomi utente o password che includono il carattere @.
*** Se la password include uno dei seguenti caratteri speciali, è necessario uscire da quel carattere speciale prependolo con una barra rovesciata: & O !
+
Ad esempio:

+
\http://bxpproxyuser:netapp1\!@address:3128





+
--cakert specifica un certificato firmato da CA da utilizzare per l'accesso HTTPS tra il connettore e il server proxy. Questo parametro è necessario solo se si specifica un server proxy HTTPS o se il proxy è un proxy di intercettazione.

. Attendere il completamento dell'installazione.
+
Al termine dell'installazione, il servizio di connessione (occm) viene riavviato due volte se si specifica un server proxy.

. Aprire un browser Web da un host connesso alla macchina virtuale Connector e immettere il seguente URL:
+
https://_ipaddress_[]

. Dopo aver effettuato l'accesso, configurare il connettore:
+
.. Specificare l'account BlueXP da associare al connettore.
.. Immettere un nome per il sistema.
.. In *stai eseguendo in un ambiente protetto?* Mantieni disattivata la modalità limitata.
+
La modalità limitata deve essere disattivata perché questa procedura descrive come utilizzare BlueXP in modalità standard. Attivare la modalità limitata solo se si dispone di un ambiente sicuro e si desidera disconnettere questo account dai servizi di back-end BlueXP. In tal caso, link:task-quick-start-restricted-mode.html["Segui i passaggi per iniziare a utilizzare BlueXP in modalità limitata"].

.. Selezionare *Let's start*.




.Risultato
Il connettore è ora installato e configurato con l'account BlueXP.

Se hai bucket Amazon S3 nello stesso account AWS in cui hai creato il connettore, vedrai automaticamente un ambiente di lavoro Amazon S3 su BlueXP Canvas. https://docs.netapp.com/us-en/bluexp-s3-storage/index.html["Scopri come gestire i bucket S3 da BlueXP"^]



== Fase 6: Fornire le autorizzazioni ad BlueXP

Ora che hai installato il connettore, devi fornire ad BlueXP le autorizzazioni AWS precedentemente configurate. La fornitura delle autorizzazioni consente a BlueXP di gestire l'infrastruttura di dati e storage in AWS.

[role="tabbed-block"]
====
.Ruolo IAM
--
Collegare il ruolo IAM precedentemente creato all'istanza di Connector EC2.

.Fasi
. Accedere alla console Amazon EC2.
. Selezionare *istanze*.
. Selezionare l'istanza del connettore.
. Selezionare *azioni > sicurezza > Modifica ruolo IAM*.
. Selezionare il ruolo IAM e selezionare *Aggiorna ruolo IAM*.


.Risultato
BlueXP dispone ora delle autorizzazioni necessarie per eseguire azioni in AWS per conto dell'utente.

Accedere alla https://console.bluexp.netapp.com["Console BlueXP"^] Per iniziare a utilizzare il connettore con BlueXP.

--
.Chiave di accesso AWS
--
Fornire a BlueXP la chiave di accesso AWS per un utente IAM che dispone delle autorizzazioni necessarie.

.Fasi
. Assicurarsi che il connettore corretto sia attualmente selezionato in BlueXP.
. Nella parte superiore destra della console BlueXP, selezionare l'icona Impostazioni e selezionare *credenziali*.
+
image:screenshot_settings_icon.gif["Una schermata che mostra l'icona Settings (Impostazioni) in alto a destra della console BlueXP."]

. Selezionare *Aggiungi credenziali* e seguire la procedura guidata.
+
.. *Credentials Location*: Selezionare *Amazon Web Services > Connector*.
.. *Definisci credenziali*: Inserire una chiave di accesso AWS e una chiave segreta.
.. *Marketplace Subscription*: Consente di associare un abbonamento Marketplace a queste credenziali sottoscrivendo ora o selezionando un abbonamento esistente.
.. *Revisione*: Confermare i dettagli relativi alle nuove credenziali e selezionare *Aggiungi*.




.Risultato
BlueXP dispone ora delle autorizzazioni necessarie per eseguire azioni in AWS per conto dell'utente.

Accedere alla https://console.bluexp.netapp.com["Console BlueXP"^] Per iniziare a utilizzare il connettore con BlueXP.

--
====